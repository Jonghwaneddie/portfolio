<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Loggia Gallery</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300;700&display=swap');

  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }
  body {
    font-family: 'Montserrat', sans-serif;
    background: #fff;
    color: #000;
    margin-left: 120px; /* 메뉴 공간 확보 */
    padding: 60px 20px;
  }
  h1 {
    font-size: 16px;
    font-weight: 700;
    letter-spacing: 1.5px;
    margin-bottom: 30px;
  }
  p.description {
    font-size: 12px;
    font-weight: 300;
    margin-bottom: 20px;
  }
  /* 슬라이드 큰 이미지 */
  .slider-container {
    position: relative;
    max-width: 900px;
    margin: 0 auto 30px auto;
  }
  .slider-container img {
    width: 100%;
    height: auto;
    display: block;
  }
  /* 좌우 화살표 */
  .arrow {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(0,0,0,0.4);
    color: white;
    font-size: 30px;
    padding: 5px 12px;
    cursor: pointer;
    user-select: none;
    border-radius: 3px;
  }
  .arrow.left {
    left: 10px;
  }
  .arrow.right {
    right: 10px;
  }
  /* 썸네일 영역 */
  .thumbnail-container {
    max-width: 900px;
    margin: 0 auto;
    display: flex;
    gap: 10px;
    overflow-x: auto;
    padding-bottom: 10px;
    flex-wrap: nowrap;
  }
  .thumbnail-container img {
    height: 80px;
    cursor: pointer;
    opacity: 0.6;
    border: 2px solid transparent;
    border-radius: 4px;
    transition: opacity 0.3s, border-color 0.3s;
    flex-shrink: 0;
  }
  .thumbnail-container img.active {
    opacity: 1;
    border-color: #333;
  }
</style>
</head>
<body>

<div id="menu-container"></div>

<h1>Loggia Gallery</h1>
<p class="description">Loggia 전시회 사진 모음입니다.</p>

<div class="slider-container">
  <span class="arrow left">&#10094;</span>
  <img id="mainImage" src="images/loggia1.jpg" alt="Loggia Image 1" />
  <span class="arrow right">&#10095;</span>
</div>

<div class="thumbnail-container" id="thumbnailContainer"></div>

<script>
  fetch('menu.html')
    .then(response => response.text())
    .then(data => {
      document.getElementById('menu-container').innerHTML = data;
      // 메뉴 토글 함수 정의
      window.toggleProjectMenu = function(e, submenuId) {
        e.preventDefault();

        const submenu1 = document.getElementById('projectSubmenu1');
        const submenu2 = document.getElementById('projectSubmenu2');
        const targetSubmenu = document.getElementById(submenuId);
        if (!targetSubmenu) return;

        if (submenuId === 'projectSubmenu1' && submenu2.classList.contains('show')) {
          submenu2.style.maxHeight = null;
          submenu2.classList.remove('show');
        } else if (submenuId === 'projectSubmenu2' && submenu1.classList.contains('show')) {
          submenu1.style.maxHeight = null;
          submenu1.classList.remove('show');
        }

        if (targetSubmenu.classList.contains('show')) {
          targetSubmenu.style.maxHeight = null;
          targetSubmenu.classList.remove('show');
        } else {
          targetSubmenu.style.maxHeight = targetSubmenu.scrollHeight + "px";
          targetSubmenu.classList.add('show');
        }
      }
    });

  const images = [
    { src: "loggiaimages/loggia1.jpg", alt: "Loggia Image 1" },
    { src: "loggiaimages/loggia2.jpg", alt: "Loggia Image 2" },
    { src: "loggiaimages/loggia3.jpg", alt: "Loggia Image 3" },
    { src: "loggiaimages/loggia4.jpg", alt: "Loggia Image 4" },
    { src: "loggiaimages/loggia5.jpg", alt: "Loggia Image 5" },
    { src: "loggiaimages/loggia6.jpg", alt: "Loggia Image 6" },
    { src: "loggiaimages/loggia7.jpg", alt: "Loggia Image 7" },
    { src: "loggiaimages/loggia8.jpg", alt: "Loggia Image 8" },
    { src: "loggiaimages/loggia9.jpg", alt: "Loggia Image 9" },
    { src: "loggiaimages/loggia10.jpg", alt: "Loggia Image 10" }
  ];

  let currentIndex = 0;

  const mainImage = document.getElementById('mainImage');
  const thumbnailContainer = document.getElementById('thumbnailContainer');

  // 썸네일 생성
  function createThumbnails() {
    images.forEach((img, index) => {
      const thumb = document.createElement('img');
      thumb.src = img.src;
      thumb.alt = img.alt;
      if(index === 0) thumb.classList.add('active');

      thumb.addEventListener('click', () => {
        currentIndex = index;
        updateMainImage();
      });
      thumbnailContainer.appendChild(thumb);
    });
  }

  function updateMainImage() {
    mainImage.src = images[currentIndex].src;
    mainImage.alt = images[currentIndex].alt;

    // 썸네일 active 상태 업데이트
    Array.from(thumbnailContainer.children).forEach((thumb, idx) => {
      if(idx === currentIndex) {
        thumb.classList.add('active');
        // 선택된 썸네일을 자동 스크롤로 중앙 근처에 보이게 하기 (선택사항)
        thumb.scrollIntoView({behavior:"smooth", inline:"center"});
      } else {
        thumb.classList.remove('active');
      }
    });
  }

  // 좌우 화살표 클릭 시 이미지 변경
  document.querySelector('.arrow.left').addEventListener('click', () => {
    currentIndex = (currentIndex - 1 + images.length) % images.length;
    updateMainImage();
  });

  document.querySelector('.arrow.right').addEventListener('click', () => {
    currentIndex = (currentIndex + 1) % images.length;
    updateMainImage();
  });

  createThumbnails();
</script>

</body>
</html>
